PK.where = {

    months: {'Jan' : 0, 'Feb' : 1, 'Mar' : 2, 'Apr' : 3, 'May' : 4, 'Jun' : 5, 'Jul' : 6, 'Aug' : 7, 'Sep' : 8, 'Oct' : 9, 'Nov' : 10, 'Dec' : 11},

    // "trip" variable comes from the data.json file included above
    /*
    w => where
    h => what
    f => from
    t => to
    d => duration
    */
    trip: [
        {
            "w": "San Franciso-Washington DC",
            "h": "four days across the USA on the Amtrak California Zephyr and Capitol Limited trains",
            "f": "Apr 5, 2015",
            "t": "Apr 8, 2015",
            "d": "half-week"
        },
        {
            "w": "Washington DC",
            "h": "cherry blossoms",
            "f": "Apr 8, 2015",
            "t": "Apr 11, 2015",
            "d": "half-week"
        },
        {
            "w": "Madison, WI",
            "h": "geoscience literature TDM at UW-Madison",
            "f": "Apr 8, 2015",
            "t": "May 26, 2015",
            "d": "one-and-half-months"
        },
        {
            "w": "Washington DC",
            "h": "presentation at ClinGen/DECIPHER Conference",
            "f": "May 26 2015",
            "t": "May 31, 2015",
            "d": "half-week"
        },
        {
            "w": "Wales",
            "h": "just me and the sheeeeep in Llanilar",
            "f": "May 31, 2015",
            "t": "Jun 9, 2015",
            "d": "ten-days"
        },
        {
            "w": "Scotland",
            "h": "writing and walking in Wester Clunes, Ediburgh, Thurso, Duror and Glasgow",
            "f": "Jun 9, 2015",
            "t": "Jul 2, 2015",
            "d": "three-weeks"
        },
        {
            "w": "Paris",
            "h": "summer in Paris",
            "f": "Jul 2, 2015",
            "t": "Jul 28, 2015",
            "d": "one-month"
        },
        {
            "w": "Cambridge, UK",
            "h": "Open Plant Week",
            "f": "Jul 29, 2015",
            "t": "Aug 6, 2015",
            "d": "one-week"
        },
        {
            "w": "Istanbul",
            "h": "summer on the Haliç",
            "f": "Aug 6, 2015",
            "t": "Sep 5, 2014",
            "d": "one-month"
        },
        {
            "w": "Siorac-en-Périgord",
            "h": "at a 17th century water mill",
            "f": "Sep 5, 2015",
            "t": "Sep 13, 2015",
            "d": "one-week"
        },
        {
            "w": "Marseille",
            "h": "",
            "f": "Sep 13, 2015",
            "t": "Sep 20, 2015",
            "d": "one-week"
        },
        {
            "w": "Paris",
            "h":  "RDA",
            "f": "Sep 20, 2015",
            "t": "Sep 30, 2015",
            "d": "ten-days"
        },
        {
            "w": "Washington DC",
            "h": "The World Bank",
            "f": "Sep 30, 2015",
            "t": "Oct 3, 2015",
            "d": "half-week"
        },
        {
            "w": "Warszawa",
            "h": "Polska Akademia Nauk",
            "f": "Oct 4, 2015",
            "t": "Oct 16, 2015",
            "d": "ten-days"
        },
        {
            "w": "Wien",
            "h": "i-KNOW Conference in Graz",
            "f": "Oct 16, 2015",
            "t": "Oct 25, 2015",
            "d": "one-week"
        },
        {
            "w": "Hamburg",
            "h": "ZBW German National Library of Economics",
            "f": "Oct 25, 2015",
            "t": "Nov 1, 2015",
            "d": "ten-days"
        },
        {
            "w": "Frankfurt",
            "h": "with Lore, Mitzy, Miller and Bastian",
            "f": "Nov 1, 2015",
            "t": "Nov 5, 2015",
            "d": "half-week"
        },
        {
            "w": "Lucknow",
            "h": "mom",
            "f": "Nov 5, 2015",
            "t": "Feb 18, 2016",
            "d": "two-weeks"
        },
        {
            "w": "Bhubhaneshwar",
            "h": "ancient temples",
            "f": "Nov 18, 2015",
            "t": "Nov 20, 2015",
            "d": "half-week"
        },
        {
            "w": "Mumbai",
            "h": "hacking science education at TIFR/HBCSE",
            "f": "Nov 20, 2015",
            "t": "Feb 29, 2016",
            "d": "three-months"
        },
        {
            "w": "Genève",
            "h": "open hardware for science at CERN",
            "f": "Mar 1, 2016",
            "t": "Mar 5, 2016",
            "d": "one-week"
        },
        {
            "w": "Bern",
            "h": "taxonomy TDM with Plazi",
            "f": "Mar 5, 2016",
            "t": "Mar 9, 2016",
            "d": "one-week"
        },
        {
            "w": "Istanbul",
            "h": "back to the Haliç, and CC-Turkiye launch",
            "f": "Mar 9, 2016",
            "t": "Mar 16, 2016",
            "d": "one-week"
        },
        {
            "w": "Washington DC",
            "h": "future prep",
            "f": "Mar 16, 2016",
            "t": "Mar 23, 2016",
            "d": "one-week"
        },
        {
            "w": "Shenzhen",
            "h": "Shenzhen Assembly Open Innovation",
            "f": "Mar 23, 2016",
            "t": "Apr 2, 2016",
            "d": "one-week"
        },
        {
            "w": "Washington DC",
            "h": "Academy Health",
            "f": "Apr 2, 2016",
            "t": "Jun 29, 2016",
            "d": "three-months"
        },
        {
            "w": "Montreal",
            "h": "Montreal Jazz Festival",
            "f": "Jun 30, 2016",
            "t": "Jul 14, 2016",
            "d": "two-weeks"
        },
        {
            "w": "Siorac-en-Périgord",
            "h": "back at the watermill",
            "f": "Jul 15, 2016",
            "t": "Jul 31, 2016",
            "d": "two-weeks"
        },
        {
            "w": "San Sebastien",
            "h": "rescue mission",
            "f": "Jul 31, 2016",
            "t": "Aug 2, 2016",
            "d": "half-week"
        },
        {
            "w": "Paris",
            "h": "je t'❤️",
            "f": "Aug 2, 2016",
            "t": "Sep 1, 2016",
            "d": "one-month"
        },
        {
            "w": "Göttingen",
            "h": "SUB University of Göttingen",
            "f": "Sep 1, 2016",
            "t": "Oct 8, 2016",
            "d": "one-month"
        },
        {
            "w": "Lucknow",
            "h": "mom",
            "f": "Oct 9, 2016",
            "t": "Nov 2, 2016",
            "d": "three-weeks"
        },
        {
            "w": "Mumbai",
            "h": "back at CUBE with GN and the kids",
            "f": "Nov 2, 2016",
            "t": "Nov 16, 2016",
            "d": "two-weeks"
        },
        {
            "w": "Disla",
            "h": "Plazi retreat in the Swiss-Italian Alps",
            "f": "Nov 17, 2016",
            "t": "Nov 30, 2016",
            "d": "two-weeks"
        },
        {
            "w": "Tiranë",
            "h": "Why ? Because !",
            "f": "Dec 1, 2016",
            "t": "Jan 8, 2017",
            "d": "five-weeks"
        },
        {
            "w": "Göttingen",
            "h": "2nd coming",
            "f": "Jan 8, 2017",
            "t": "Feb 7, 2017",
            "d": "four-weeks"
        },
        {
            "w": "Paris",
            "h": "reunion",
            "f": "Feb 7, 2017",
            "t": "Feb 12, 2017",
            "d": "one-week"
        },
        {
            "w": "Siorac-en-Périgord",
            "h": "Dordogne in early spring",
            "f": "Feb 12, 2017",
            "t": "Feb 28, 2017",
            "d": "two-weeks"
        },
        {
            "w": "Bordeaux",
            "h": "vin",
            "f": "Feb 25, 2017",
            "t": "Feb 28, 2017",
            "d": "half-week"
        },
        {
            "w": "Santiago de Chile",
            "h": "GOSH 2",
            "f": "Mar 1, 2017",
            "t": "Mar 31, 2017",
            "d": "one-month"
        },
        {
            "w": "London",
            "h": "Brentry",
            "f": "Apr 1, 2017",
            "t": "Apr 4, 2017",
            "d": "half-week"
        },
        {
            "w": "Lucknow",
            "h": "check-in",
            "f": "Apr 4, 2017",
            "t": "Apr 10, 2017",
            "d": "one-week"
        },
        {
            "w": "Mumbai",
            "h": "HBCSE",
            "f": "Apr 10, 2017",
            "t": "May 9, 2017",
            "d": "one-month"
        },
        {
            "w": "Genève",
            "h": "biofabbing and biofabulations at the University of Genève/CERN",
            "f": "May 9, 2017",
            "t": "May 14, 2017",
            "d": "one-week"
        },{
            "w": "Bordeaux",
            "h": "INSERM atélier sur les données sur la santé",
            "f": "May 14, 2017",
            "t": "May 18, 2017",
            "d": "one-week"
        },
        {
            "w": "Bern",
            "h": "more TDM at Plazi HQ",
            "f": "May 18, 2017",
            "t": "May 28, 2017",
            "d": "two-weeks"
        },
        {
            "w": "Göttingen",
            "h": "church code",
            "f": "May 28, 2017",
            "t": "Jun 28, 2017",
            "d": "one-month"
        },
        {
            "w": "Montreal",
            "h": "jazz 3.0",
            "f": "Jun 29, 2017",
            "t": "Jul 13, 2017",
            "d": "two-weeks"
        },
        {
            "w": "New York City",
            "h": "❤️ avec ma fille",
            "f": "Jul 13, 2017",
            "t": "Jul 22, 2017",
            "d": "one-week"
        },
        {
            "w": "Göttingen-Berlin",
            "h": "paperwork",
            "f": "Jul 23, 2017",
            "t": "Aug 1, 2017",
            "d": "one-week"
        },
        {
            "w": "Wester Clunes, Scotland",
            "h": "with the coos",
            "f": "Aug 1, 2017",
            "t": "Aug 15, 2017",
            "d": "two-weeks"
        },
        {
            "w": "Newcaste upon Tyne",
            "h": "the lizard keeper and the cliffs",
            "f": "Aug 15, 2017",
            "t": "Aug 22, 2017",
            "d": "one-week"
        },
        {
            "w": "Ulaanbaatar, Mongolia",
            "h": "fermented yak’s milk",
            "f": "Aug 23, 2017",
            "t": "Sep 23, 2017",
            "d": "one-month"
        },
        {
            "w": "Nice, France",
            "h": "Journée des Jeunes Chercheurs à l’Observatoire Océanologique de Villefranche",
            "f": "Sep 23, 2017",
            "t": "Sep 30, 2017",
            "d": "one-week"
        },
        {
            "w": "Göttingen, Germany",
            "h": "prep for GeoScience",
            "f": "Oct 1, 2017",
            "t": "Oct 31, 2017",
            "d": "one-month"
        },
        {
            "w": "Maastricht, NL",
            "h": "University of Maastricht",
            "f": "Nov 1, 2017",
            "t": "Nov 11, 2017",
            "d": "two-weeks"
        },
        {
            "w": "Siorac-en-Périgord",
            "h": "back to the animals at the onset of winter",
            "f": "Nov 11, 2017",
            "t": "Nov 25, 2017",
            "d": "two-weeks"
        },
        {
            "w": "Bordeaux",
            "h": "canèles",
            "f": "Nov 25, 2017",
            "t": "Nov 27, 2017",
            "d": "half-week"
        },
        {
            "w": "Paris",
            "h": "old friends",
            "f": "Nov 27, 2017",
            "t": "Dec 3, 2017",
            "d": "one-week"
        },
        {
            "w": "Lucknow",
            "h": "homes, one of many",
            "f": "Dec 4, 2017",
            "t": "Dec 11, 2017",
            "d": "one-weeks"
        },
        {
            "w": "Bangalore",
            "h": "Srishti",
            "f": "Dec 11, 2017",
            "t": "Jan 15, 2018",
            "d": "five-weeks"
        },
        {
            "w": "Göttingen, Germany",
            "h": "prep for GeoScience",
            "f": "Jan 15, 2018",
            "t": "Feb 27, 2018",
            "d": "one-and-half-months"
        },
        {
            "w": "New Delhi",
            "h": "Art+Science Residency at KHOJ",
            "f": "Feb 28, 2018",
            "t": "Apr 1, 2018",
            "d": "one-month"
        },
        {
            "w": "Geneva",
            "h": "working with the Zenodo team at CERN",
            "f": "Apr 2, 2018",
            "t": "Apr 10, 2018",
            "d": "one-week"
        },
        {
            "w": "Göttingen/Berlin",
            "h": "paperwork",
            "f": "Apr 10, 2018",
            "t": "Apr 19, 2018",
            "d": "one-week"
        },
        {
            "w": "Washington DC",
            "h": "housekeeping",
            "f": "Apr 19, 2018",
            "t": "May 20, 2018",
            "d": "one-month"
        },
        {
            "w": "New York City",
            "h": "bio-printer y mi hija",
            "f": "May 20, 2018",
            "t": "May 31, 2018",
            "d": "two-weeks"
        },
        {
            "w": "Berlin",
            "h": "Freiberufler",
            "f": "Jun 1, 2018",
            "t": "Sep 14, 2018",
            "d": "three-months"
        },
        {
            "w": "Sofia",
            "h": "Plazi meetings",
            "f": "Sep 14, 2018",
            "t": "Sep 20, 2018",
            "d": "one-week"
        },
        {
            "w": "Paris",
            "h": "just cuz",
            "f": "Sep 20, 2018",
            "t": "Sep 30, 2018",
            "d": "one-week"
        },
        {
            "w": "Vienna",
            "h": "Solidarity",
            "f": "Oct 1, 2018",
            "t": "Nov 30, 2018",
            "d": "two-months"
        },
        {
            "w": "Lucknow",
            "h": "home again",
            "f": "Dec 1, 2018",
            "t": "Dec 9, 2018",
            "d": "one-week"
        },
        {
            "w": "Mumbai",
            "h": "makerlab",
            "f": "Dec 10, 2018",
            "t": "Jan 1, 2019",
            "d": "three-weeks"
        },
        {
            "w": "Marseille",
            "h": "Walter Benjamin and the sea",
            "f": "Jan 1, 2019",
            "t": "Jan 15, 2019",
            "d": "two-weeks"
        },
        {
            "w": "Siorac-en-Périgord",
            "h": "animals",
            "f": "Jan 15, 2019",
            "t": "Jan 31, 2019",
            "d": "two-weeks"
        },
        {
            "w": "Paris",
            "h": "Palais du Suisse",
            "f": "Feb 1, 2019",
            "t": "Feb 3, 2019",
            "d": "half-week"
        },
        {
            "w": "Genève",
            "h": "CERN",
            "f": "Feb 3, 2019",
            "t": "Feb 9, 2019",
            "d": "one-week"
        },
        {
            "w": "Göttingen/Berlin",
            "h": "no work is done until the paperwork is done",
            "f": "Feb 9, 2019",
            "t": "Mar 1, 2019",
            "d": "three-weeks"
        },
        {
            "w": "Madrid",
            "h": "FAIR4Health",
            "f": "Mar 1, 2019",
            "t": "Mar 30, 2019",
            "d": "one-month"
        },
        {
            "w": "Göttingen/Berlin",
            "h": "reup the cycle",
            "f": "Mar 30, 2019",
            "t": "Apr 10, 2019",
            "d": "two-weeks"
        },
        // {
        //     "w": "Washington DC",
        //     "h": "reup the cycle",
        //     "f": "Apr 10, 2019",
        //     "t": "May 10, 2019",
        //     "d": "one-month"
        // },
        // {
        //     "w": "New York City",
        //     "h": "Timber",
        //     "f": "May 10, 2019",
        //     "t": "May 15, 2019",
        //     "d": "one-week"
        // },
        // {
        //     "w": "Porto Alegre, Brazil",
        //     "h": "scraping",
        //     "f": "May 15, 2019",
        //     "t": "Jun 15, 2019",
        //     "d": "one-month"
        // },
        // {
        //     "w": "Madrid",
        //     "h": "return",
        //     "f": "Jun 15, 2019",
        //     "t": "Jun 30, 2019",
        //     "d": "two-weeks"
        // }
    ],

    init: function() {
        const now = new Date();
        
        let html = '';
        let i = 0;
        const j = this.trip.length;
        let f;
        let from;
        let t;
        let to;
        let time_class;

        for (; i < j; i++) {
    
            f = this.trip[i].f.replace(',', '').split(/ /);
            from = new Date(f[2], this.months[f[0]], f[1]);
    
            t = this.trip[i].t.replace(',', '').split(/ /);
            to = new Date(t[2], this.months[t[0]], t[1]);
    
            if (now < from) {
                time_class = 'afterNow';
            }
            else if ((now >= from) && (now <= to)) {
                time_class = 'now';
            }
            else if (now > to) {
                time_class = 'beforeNow';
            }
    
            // html += '<li' + (time_class === "now" ? ' id="now" ' : '') + ' class="' + this.trip[i].d + ' ' + time_class + '">' +
            //         '<div class="anno">' +
            //         '<span class="where"><a href="/entries?q=tags:' + this.trip[i].w + '">' + this.trip[i].w + '</a></span> ' +
            //         '<span class="when">' + this.trip[i].f + '-' + this.trip[i].t + '</span><br>' +
            //         '<div class="what">' + this.trip[i].h + '</div>' +
            //         '</div>' +
            //         '</li>';

            let id = (time_class === "now" ? "now" : "");
            html += `<li id="${id}" class="${this.trip[i].d}">
                <span class="${time_class}">•</span><a href="/entries?q=tags:${this.trip[i].w}">${this.trip[i].w}</a> ${this.trip[i].f}–${this.trip[i].t}, ${this.trip[i].h}
            </li>`;
        }
        html += '<li class="one-week"><span class="whereNext">?</span></li>';
    
        PK.$("#experiences").innerHTML = html;
    
        const hdr = PK.$("header")[0].getBoundingClientRect().bottom;
        const rightNow = PK.$("#now").getBoundingClientRect().top;
    
        PK.smoothScroll(rightNow - hdr - 10);
    }
};